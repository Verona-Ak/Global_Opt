"use strict";window.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".nav__list"),t=document.querySelectorAll(".nav__item"),l=document.querySelector(".hamburger");function o(e){$(e).each((function(e){$(this).on("click",(function(t){t.preventDefault(),$(".prices__block").eq(e).toggleClass("prices__block_active"),$(".prices__add").eq(e).toggleClass("prices__add_active")}))}))}function n(e){$(e).validate({rules:{name:{required:!0,minlength:2},phone:{required:!0},email:{required:!0,email:!0},message:{required:!0,minlength:2,maxlength:50}},messages:{name:{required:"Пожалуйста, введите своё имя",minlength:jQuery.validator.format("Введите {0} символа!")},phone:{required:"Пожалуйста, введите свой телефон"},email:{required:"Пожалуйста, введите свою почту",email:"Неправильно введён адрес почты"},message:{required:"Пожалуйста, введите сообщение",minlength:jQuery.validator.format("Введите от 2 до 150 символов!"),maxlength:jQuery.validator.format("Максимальный объём сообщения 150 символов!")}}})}l.addEventListener("click",()=>{l.classList.toggle("hamburger_active"),e.classList.toggle("nav__list_active")}),t.forEach(t=>{t.addEventListener("click",()=>{l.classList.toggle("hamburger_active"),e.classList.toggle("nav__list_active")})}),$(".carousel").slick({speed:1200,adaptiveHeight:!0,prevArrow:'<button type="button" class="slick-prev"><img src="icons/arrow-left.png"></img></button>',nextArrow:'<button type="button" class="slick-next"><img src="icons/arrow-right.png"></img></button>',responsive:[{breakpoint:992,settings:{dots:!1,arrows:!0}}]}),o(".button_prices_back"),o(".button_prices_next"),n("#consultation-form"),n("#questions-form"),n("#callback-form"),n("#calculation-form"),$("input[name=phone]").mask("+7 (999) 999-99-99");const r=document.querySelectorAll(".prices"),c=document.querySelectorAll(".prices__descr_moreinf");document.querySelector(".catalog").addEventListener("click",(function(e){e.target&&e.target.classList.contains("button_prices_next")&&function(e){for(let t=0;t<r.length;t++){let l=document.querySelectorAll(".button_prices_next")[t];if(e==l){let e=[],l=c[t].textContent;l=l.replace(/[\s\.,!\?:;'"\(\)]/g,"");for(let t=0;t<l.length;t++)e.push(l[t]);c[t].style.overflowY=e.length>=220?"scroll":"hidden"}}}(e.target)}));const a=document.getElementsByClassName("pageup")[0];let s=0;setInterval((function(){s++,s>=10?a.classList.add("pageup__animated"):a.classList.remove("pageup__animated");return s}),1e3);function i(){let e,t=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop;if(!(t>0))return clearTimeout(e),!1;window.scrollBy(0,(t+100)/-10),e=setTimeout(i,20)}document.addEventListener("scroll",(function(){let e=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop;return a.style.display=e>1e3?"block":"none",s=0,s})),a.addEventListener("mouseover",()=>{let e=setInterval((function(){return s=0,s}),1e3);a.addEventListener("mouseleave",()=>{clearInterval(e)}),a.addEventListener("click",(function(t){i(),clearInterval(e)}))}),(new WOW).init();let u=document.querySelectorAll("a[href*='#']");for(let e of u)e.addEventListener("click",(function(t){t.preventDefault();let l=e.getAttribute("href");if(t.target&&/\w$/.test(l)){document.querySelector(""+l).scrollIntoView({behavior:"smooth",block:"start"})}}));const d=document.querySelector(".header__button"),m=document.querySelector(".promo__button"),g=document.querySelector(".footer__button"),f=document.querySelector(".overlay"),p=document.querySelectorAll(".modal"),y=document.querySelectorAll(".modal")[0],_=document.querySelectorAll(".modal")[1],v=document.querySelectorAll(".modal")[2],b=document.querySelectorAll("form");document.addEventListener("click",(function(e){e.target&&e.target==d||e.target==g?(f.style.display="block",y.style.display="block"):e.target&&e.target==m&&(f.style.display="block",_.style.display="block")})),f.addEventListener("click",(function(e){if(e.target&&e.target.classList.contains("modal__close")){f.style.display="none";for(let e=0;e<p.length;e++)p[e].style.display="none";for(let e=0;e<b.length;e++)b[e].reset()}}));for(let e of b)e.addEventListener("submit",(async function(t){t.preventDefault();let l=0,o=[...e.querySelectorAll("input"),...e.querySelectorAll("textarea")];for(let e of o)e.classList.contains("error")||(l+=1);if(l==o.length){let t=new FormData(e),l=await fetch("sendmail.php",{method:"POST",body:t});if(l.ok){let e=await l.json();alert(e.message);for(let e=0;e<p.length;e++)p[e].style.display="none";f.style.display="block",v.style.display="block"}else alert("Ошибка")}}))}));